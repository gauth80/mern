{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}(); // modules\n\n\nvar _delegate = require('delegate');\n\nvar _delegate2 = _interopRequireDefault(_delegate);\n\nvar _Cache = require('./modules/Cache');\n\nvar _Cache2 = _interopRequireDefault(_Cache);\n\nvar _loadPage = require('./modules/loadPage');\n\nvar _loadPage2 = _interopRequireDefault(_loadPage);\n\nvar _renderPage = require('./modules/renderPage');\n\nvar _renderPage2 = _interopRequireDefault(_renderPage);\n\nvar _triggerEvent = require('./modules/triggerEvent');\n\nvar _triggerEvent2 = _interopRequireDefault(_triggerEvent);\n\nvar _on = require('./modules/on');\n\nvar _on2 = _interopRequireDefault(_on);\n\nvar _off = require('./modules/off');\n\nvar _off2 = _interopRequireDefault(_off);\n\nvar _updateTransition = require('./modules/updateTransition');\n\nvar _updateTransition2 = _interopRequireDefault(_updateTransition);\n\nvar _getAnimationPromises = require('./modules/getAnimationPromises');\n\nvar _getAnimationPromises2 = _interopRequireDefault(_getAnimationPromises);\n\nvar _getPageData = require('./modules/getPageData');\n\nvar _getPageData2 = _interopRequireDefault(_getPageData);\n\nvar _plugins = require('./modules/plugins');\n\nvar _utils = require('./utils');\n\nvar _helpers = require('./helpers');\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nvar Swup = function () {\n  function Swup(setOptions) {\n    _classCallCheck(this, Swup); // default options\n\n\n    var defaults = {\n      animateHistoryBrowsing: false,\n      animationSelector: '[class*=\"transition-\"]',\n      linkSelector: 'a[href^=\"' + window.location.origin + '\"]:not([data-no-swup]), a[href^=\"/\"]:not([data-no-swup]), a[href^=\"#\"]:not([data-no-swup])',\n      cache: true,\n      containers: ['#swup'],\n      requestHeaders: {\n        'X-Requested-With': 'swup',\n        Accept: 'text/html, application/xhtml+xml'\n      },\n      plugins: [],\n      skipPopStateHandling: function skipPopStateHandling(event) {\n        return !(event.state && event.state.source === 'swup');\n      }\n    }; // merge options\n\n    var options = _extends({}, defaults, setOptions); // handler arrays\n\n\n    this._handlers = {\n      animationInDone: [],\n      animationInStart: [],\n      animationOutDone: [],\n      animationOutStart: [],\n      animationSkipped: [],\n      clickLink: [],\n      contentReplaced: [],\n      disabled: [],\n      enabled: [],\n      openPageInNewTab: [],\n      pageLoaded: [],\n      pageRetrievedFromCache: [],\n      pageView: [],\n      popState: [],\n      samePage: [],\n      samePageWithHash: [],\n      serverError: [],\n      transitionStart: [],\n      transitionEnd: [],\n      willReplaceContent: []\n    }; // variable for id of element to scroll to after render\n\n    this.scrollToElement = null; // variable for promise used for preload, so no new loading of the same page starts while page is loading\n\n    this.preloadPromise = null; // variable for save options\n\n    this.options = options; // variable for plugins array\n\n    this.plugins = []; // variable for current transition object\n\n    this.transition = {}; // variable for keeping event listeners from \"delegate\"\n\n    this.delegatedListeners = {}; // so we are able to remove the listener\n\n    this.boundPopStateHandler = this.popStateHandler.bind(this); // make modules accessible in instance\n\n    this.cache = new _Cache2.default();\n    this.cache.swup = this;\n    this.loadPage = _loadPage2.default;\n    this.renderPage = _renderPage2.default;\n    this.triggerEvent = _triggerEvent2.default;\n    this.on = _on2.default;\n    this.off = _off2.default;\n    this.updateTransition = _updateTransition2.default;\n    this.getAnimationPromises = _getAnimationPromises2.default;\n    this.getPageData = _getPageData2.default;\n\n    this.log = function () {}; // here so it can be used by plugins\n\n\n    this.use = _plugins.use;\n    this.unuse = _plugins.unuse;\n    this.findPlugin = _plugins.findPlugin; // enable swup\n\n    this.enable();\n  }\n\n  _createClass(Swup, [{\n    key: 'enable',\n    value: function enable() {\n      var _this = this; // check for Promise support\n\n\n      if (typeof Promise === 'undefined') {\n        console.warn('Promise is not supported');\n        return;\n      } // add event listeners\n\n\n      this.delegatedListeners.click = (0, _delegate2.default)(document, this.options.linkSelector, 'click', this.linkClickHandler.bind(this));\n      window.addEventListener('popstate', this.boundPopStateHandler); // initial save to cache\n\n      var page = (0, _helpers.getDataFromHtml)(document.documentElement.outerHTML, this.options.containers);\n      page.url = page.responseURL = (0, _helpers.getCurrentUrl)();\n\n      if (this.options.cache) {\n        this.cache.cacheUrl(page);\n      } // mark swup blocks in html\n\n\n      (0, _helpers.markSwupElements)(document.documentElement, this.options.containers); // mount plugins\n\n      this.options.plugins.forEach(function (plugin) {\n        _this.use(plugin);\n      }); // modify initial history record\n\n      window.history.replaceState(Object.assign({}, window.history.state, {\n        url: window.location.href,\n        random: Math.random(),\n        source: 'swup'\n      }), document.title, window.location.href); // trigger enabled event\n\n      this.triggerEvent('enabled'); // add swup-enabled class to html tag\n\n      document.documentElement.classList.add('swup-enabled'); // trigger page view event\n\n      this.triggerEvent('pageView');\n    }\n  }, {\n    key: 'destroy',\n    value: function destroy() {\n      var _this2 = this; // remove delegated listeners\n\n\n      this.delegatedListeners.click.destroy(); // remove popstate listener\n\n      window.removeEventListener('popstate', this.boundPopStateHandler); // empty cache\n\n      this.cache.empty(); // unmount plugins\n\n      this.options.plugins.forEach(function (plugin) {\n        _this2.unuse(plugin);\n      }); // remove swup data atributes from blocks\n\n      (0, _utils.queryAll)('[data-swup]').forEach(function (element) {\n        element.removeAttribute('data-swup');\n      }); // remove handlers\n\n      this.off(); // trigger disable event\n\n      this.triggerEvent('disabled'); // remove swup-enabled class from html tag\n\n      document.documentElement.classList.remove('swup-enabled');\n    }\n  }, {\n    key: 'linkClickHandler',\n    value: function linkClickHandler(event) {\n      // no control key pressed\n      if (!event.metaKey && !event.ctrlKey && !event.shiftKey && !event.altKey) {\n        // index of pressed button needs to be checked because Firefox triggers click on all mouse buttons\n        if (event.button === 0) {\n          this.triggerEvent('clickLink', event);\n          event.preventDefault();\n          var link = new _helpers.Link(event.delegateTarget);\n\n          if (link.getAddress() == (0, _helpers.getCurrentUrl)() || link.getAddress() == '') {\n            // link to the same URL\n            if (link.getHash() != '') {\n              // link to the same URL with hash\n              this.triggerEvent('samePageWithHash', event);\n              var element = document.querySelector(link.getHash());\n\n              if (element != null) {\n                history.replaceState({\n                  url: link.getAddress() + link.getHash(),\n                  random: Math.random(),\n                  source: 'swup'\n                }, document.title, link.getAddress() + link.getHash());\n              } else {\n                // referenced element not found\n                console.warn('Element for offset not found (' + link.getHash() + ')');\n              }\n            } else {\n              // link to the same URL without hash\n              this.triggerEvent('samePage', event);\n            }\n          } else {\n            // link to different url\n            if (link.getHash() != '') {\n              this.scrollToElement = link.getHash();\n            } // get custom transition from data\n\n\n            var customTransition = event.delegateTarget.getAttribute('data-swup-transition'); // load page\n\n            this.loadPage({\n              url: link.getAddress(),\n              customTransition: customTransition\n            }, false);\n          }\n        }\n      } else {\n        // open in new tab (do nothing)\n        this.triggerEvent('openPageInNewTab', event);\n      }\n    }\n  }, {\n    key: 'popStateHandler',\n    value: function popStateHandler(event) {\n      if (this.options.skipPopStateHandling(event)) return;\n      var link = new _helpers.Link(event.state ? event.state.url : window.location.pathname);\n\n      if (link.getHash() !== '') {\n        this.scrollToElement = link.getHash();\n      } else {\n        event.preventDefault();\n      }\n\n      this.triggerEvent('popState', event);\n      this.loadPage({\n        url: link.getAddress()\n      }, event);\n    }\n  }]);\n\n  return Swup;\n}();\n\nexports.default = Swup;","map":{"version":3,"sources":["C:/Users/Gauth/Desktop/perso/site/node_modules/swup/lib/index.js"],"names":["Object","defineProperty","exports","value","_extends","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_createClass","defineProperties","props","descriptor","enumerable","configurable","writable","Constructor","protoProps","staticProps","_delegate","require","_delegate2","_interopRequireDefault","_Cache","_Cache2","_loadPage","_loadPage2","_renderPage","_renderPage2","_triggerEvent","_triggerEvent2","_on","_on2","_off","_off2","_updateTransition","_updateTransition2","_getAnimationPromises","_getAnimationPromises2","_getPageData","_getPageData2","_plugins","_utils","_helpers","obj","__esModule","default","_classCallCheck","instance","TypeError","Swup","setOptions","defaults","animateHistoryBrowsing","animationSelector","linkSelector","window","location","origin","cache","containers","requestHeaders","Accept","plugins","skipPopStateHandling","event","state","options","_handlers","animationInDone","animationInStart","animationOutDone","animationOutStart","animationSkipped","clickLink","contentReplaced","disabled","enabled","openPageInNewTab","pageLoaded","pageRetrievedFromCache","pageView","popState","samePage","samePageWithHash","serverError","transitionStart","transitionEnd","willReplaceContent","scrollToElement","preloadPromise","transition","delegatedListeners","boundPopStateHandler","popStateHandler","bind","swup","loadPage","renderPage","triggerEvent","on","off","updateTransition","getAnimationPromises","getPageData","log","use","unuse","findPlugin","enable","_this","Promise","console","warn","click","document","linkClickHandler","addEventListener","page","getDataFromHtml","documentElement","outerHTML","url","responseURL","getCurrentUrl","cacheUrl","markSwupElements","forEach","plugin","history","replaceState","href","random","Math","title","classList","add","destroy","_this2","removeEventListener","empty","queryAll","element","removeAttribute","remove","metaKey","ctrlKey","shiftKey","altKey","button","preventDefault","link","Link","delegateTarget","getAddress","getHash","querySelector","customTransition","getAttribute","pathname"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\n// modules\n\n\nvar _delegate = require('delegate');\n\nvar _delegate2 = _interopRequireDefault(_delegate);\n\nvar _Cache = require('./modules/Cache');\n\nvar _Cache2 = _interopRequireDefault(_Cache);\n\nvar _loadPage = require('./modules/loadPage');\n\nvar _loadPage2 = _interopRequireDefault(_loadPage);\n\nvar _renderPage = require('./modules/renderPage');\n\nvar _renderPage2 = _interopRequireDefault(_renderPage);\n\nvar _triggerEvent = require('./modules/triggerEvent');\n\nvar _triggerEvent2 = _interopRequireDefault(_triggerEvent);\n\nvar _on = require('./modules/on');\n\nvar _on2 = _interopRequireDefault(_on);\n\nvar _off = require('./modules/off');\n\nvar _off2 = _interopRequireDefault(_off);\n\nvar _updateTransition = require('./modules/updateTransition');\n\nvar _updateTransition2 = _interopRequireDefault(_updateTransition);\n\nvar _getAnimationPromises = require('./modules/getAnimationPromises');\n\nvar _getAnimationPromises2 = _interopRequireDefault(_getAnimationPromises);\n\nvar _getPageData = require('./modules/getPageData');\n\nvar _getPageData2 = _interopRequireDefault(_getPageData);\n\nvar _plugins = require('./modules/plugins');\n\nvar _utils = require('./utils');\n\nvar _helpers = require('./helpers');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Swup = function () {\n\tfunction Swup(setOptions) {\n\t\t_classCallCheck(this, Swup);\n\n\t\t// default options\n\t\tvar defaults = {\n\t\t\tanimateHistoryBrowsing: false,\n\t\t\tanimationSelector: '[class*=\"transition-\"]',\n\t\t\tlinkSelector: 'a[href^=\"' + window.location.origin + '\"]:not([data-no-swup]), a[href^=\"/\"]:not([data-no-swup]), a[href^=\"#\"]:not([data-no-swup])',\n\t\t\tcache: true,\n\t\t\tcontainers: ['#swup'],\n\t\t\trequestHeaders: {\n\t\t\t\t'X-Requested-With': 'swup',\n\t\t\t\tAccept: 'text/html, application/xhtml+xml'\n\t\t\t},\n\t\t\tplugins: [],\n\t\t\tskipPopStateHandling: function skipPopStateHandling(event) {\n\t\t\t\treturn !(event.state && event.state.source === 'swup');\n\t\t\t}\n\t\t};\n\n\t\t// merge options\n\t\tvar options = _extends({}, defaults, setOptions);\n\n\t\t// handler arrays\n\t\tthis._handlers = {\n\t\t\tanimationInDone: [],\n\t\t\tanimationInStart: [],\n\t\t\tanimationOutDone: [],\n\t\t\tanimationOutStart: [],\n\t\t\tanimationSkipped: [],\n\t\t\tclickLink: [],\n\t\t\tcontentReplaced: [],\n\t\t\tdisabled: [],\n\t\t\tenabled: [],\n\t\t\topenPageInNewTab: [],\n\t\t\tpageLoaded: [],\n\t\t\tpageRetrievedFromCache: [],\n\t\t\tpageView: [],\n\t\t\tpopState: [],\n\t\t\tsamePage: [],\n\t\t\tsamePageWithHash: [],\n\t\t\tserverError: [],\n\t\t\ttransitionStart: [],\n\t\t\ttransitionEnd: [],\n\t\t\twillReplaceContent: []\n\t\t};\n\n\t\t// variable for id of element to scroll to after render\n\t\tthis.scrollToElement = null;\n\t\t// variable for promise used for preload, so no new loading of the same page starts while page is loading\n\t\tthis.preloadPromise = null;\n\t\t// variable for save options\n\t\tthis.options = options;\n\t\t// variable for plugins array\n\t\tthis.plugins = [];\n\t\t// variable for current transition object\n\t\tthis.transition = {};\n\t\t// variable for keeping event listeners from \"delegate\"\n\t\tthis.delegatedListeners = {};\n\t\t// so we are able to remove the listener\n\t\tthis.boundPopStateHandler = this.popStateHandler.bind(this);\n\n\t\t// make modules accessible in instance\n\t\tthis.cache = new _Cache2.default();\n\t\tthis.cache.swup = this;\n\t\tthis.loadPage = _loadPage2.default;\n\t\tthis.renderPage = _renderPage2.default;\n\t\tthis.triggerEvent = _triggerEvent2.default;\n\t\tthis.on = _on2.default;\n\t\tthis.off = _off2.default;\n\t\tthis.updateTransition = _updateTransition2.default;\n\t\tthis.getAnimationPromises = _getAnimationPromises2.default;\n\t\tthis.getPageData = _getPageData2.default;\n\t\tthis.log = function () {}; // here so it can be used by plugins\n\t\tthis.use = _plugins.use;\n\t\tthis.unuse = _plugins.unuse;\n\t\tthis.findPlugin = _plugins.findPlugin;\n\n\t\t// enable swup\n\t\tthis.enable();\n\t}\n\n\t_createClass(Swup, [{\n\t\tkey: 'enable',\n\t\tvalue: function enable() {\n\t\t\tvar _this = this;\n\n\t\t\t// check for Promise support\n\t\t\tif (typeof Promise === 'undefined') {\n\t\t\t\tconsole.warn('Promise is not supported');\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// add event listeners\n\t\t\tthis.delegatedListeners.click = (0, _delegate2.default)(document, this.options.linkSelector, 'click', this.linkClickHandler.bind(this));\n\t\t\twindow.addEventListener('popstate', this.boundPopStateHandler);\n\n\t\t\t// initial save to cache\n\t\t\tvar page = (0, _helpers.getDataFromHtml)(document.documentElement.outerHTML, this.options.containers);\n\t\t\tpage.url = page.responseURL = (0, _helpers.getCurrentUrl)();\n\t\t\tif (this.options.cache) {\n\t\t\t\tthis.cache.cacheUrl(page);\n\t\t\t}\n\n\t\t\t// mark swup blocks in html\n\t\t\t(0, _helpers.markSwupElements)(document.documentElement, this.options.containers);\n\n\t\t\t// mount plugins\n\t\t\tthis.options.plugins.forEach(function (plugin) {\n\t\t\t\t_this.use(plugin);\n\t\t\t});\n\n\t\t\t// modify initial history record\n\t\t\twindow.history.replaceState(Object.assign({}, window.history.state, {\n\t\t\t\turl: window.location.href,\n\t\t\t\trandom: Math.random(),\n\t\t\t\tsource: 'swup'\n\t\t\t}), document.title, window.location.href);\n\n\t\t\t// trigger enabled event\n\t\t\tthis.triggerEvent('enabled');\n\n\t\t\t// add swup-enabled class to html tag\n\t\t\tdocument.documentElement.classList.add('swup-enabled');\n\n\t\t\t// trigger page view event\n\t\t\tthis.triggerEvent('pageView');\n\t\t}\n\t}, {\n\t\tkey: 'destroy',\n\t\tvalue: function destroy() {\n\t\t\tvar _this2 = this;\n\n\t\t\t// remove delegated listeners\n\t\t\tthis.delegatedListeners.click.destroy();\n\n\t\t\t// remove popstate listener\n\t\t\twindow.removeEventListener('popstate', this.boundPopStateHandler);\n\n\t\t\t// empty cache\n\t\t\tthis.cache.empty();\n\n\t\t\t// unmount plugins\n\t\t\tthis.options.plugins.forEach(function (plugin) {\n\t\t\t\t_this2.unuse(plugin);\n\t\t\t});\n\n\t\t\t// remove swup data atributes from blocks\n\t\t\t(0, _utils.queryAll)('[data-swup]').forEach(function (element) {\n\t\t\t\telement.removeAttribute('data-swup');\n\t\t\t});\n\n\t\t\t// remove handlers\n\t\t\tthis.off();\n\n\t\t\t// trigger disable event\n\t\t\tthis.triggerEvent('disabled');\n\n\t\t\t// remove swup-enabled class from html tag\n\t\t\tdocument.documentElement.classList.remove('swup-enabled');\n\t\t}\n\t}, {\n\t\tkey: 'linkClickHandler',\n\t\tvalue: function linkClickHandler(event) {\n\t\t\t// no control key pressed\n\t\t\tif (!event.metaKey && !event.ctrlKey && !event.shiftKey && !event.altKey) {\n\t\t\t\t// index of pressed button needs to be checked because Firefox triggers click on all mouse buttons\n\t\t\t\tif (event.button === 0) {\n\t\t\t\t\tthis.triggerEvent('clickLink', event);\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tvar link = new _helpers.Link(event.delegateTarget);\n\t\t\t\t\tif (link.getAddress() == (0, _helpers.getCurrentUrl)() || link.getAddress() == '') {\n\t\t\t\t\t\t// link to the same URL\n\t\t\t\t\t\tif (link.getHash() != '') {\n\t\t\t\t\t\t\t// link to the same URL with hash\n\t\t\t\t\t\t\tthis.triggerEvent('samePageWithHash', event);\n\t\t\t\t\t\t\tvar element = document.querySelector(link.getHash());\n\t\t\t\t\t\t\tif (element != null) {\n\t\t\t\t\t\t\t\thistory.replaceState({\n\t\t\t\t\t\t\t\t\turl: link.getAddress() + link.getHash(),\n\t\t\t\t\t\t\t\t\trandom: Math.random(),\n\t\t\t\t\t\t\t\t\tsource: 'swup'\n\t\t\t\t\t\t\t\t}, document.title, link.getAddress() + link.getHash());\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t// referenced element not found\n\t\t\t\t\t\t\t\tconsole.warn('Element for offset not found (' + link.getHash() + ')');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// link to the same URL without hash\n\t\t\t\t\t\t\tthis.triggerEvent('samePage', event);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// link to different url\n\t\t\t\t\t\tif (link.getHash() != '') {\n\t\t\t\t\t\t\tthis.scrollToElement = link.getHash();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// get custom transition from data\n\t\t\t\t\t\tvar customTransition = event.delegateTarget.getAttribute('data-swup-transition');\n\n\t\t\t\t\t\t// load page\n\t\t\t\t\t\tthis.loadPage({ url: link.getAddress(), customTransition: customTransition }, false);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// open in new tab (do nothing)\n\t\t\t\tthis.triggerEvent('openPageInNewTab', event);\n\t\t\t}\n\t\t}\n\t}, {\n\t\tkey: 'popStateHandler',\n\t\tvalue: function popStateHandler(event) {\n\t\t\tif (this.options.skipPopStateHandling(event)) return;\n\t\t\tvar link = new _helpers.Link(event.state ? event.state.url : window.location.pathname);\n\t\t\tif (link.getHash() !== '') {\n\t\t\t\tthis.scrollToElement = link.getHash();\n\t\t\t} else {\n\t\t\t\tevent.preventDefault();\n\t\t\t}\n\t\t\tthis.triggerEvent('popState', event);\n\t\t\tthis.loadPage({ url: link.getAddress() }, event);\n\t\t}\n\t}]);\n\n\treturn Swup;\n}();\n\nexports.default = Swup;"]},"metadata":{},"sourceType":"script"}